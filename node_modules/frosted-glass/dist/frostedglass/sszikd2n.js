/*! Built with http://stenciljs.com */
const{h:t,Context:e}=window.frostedglass;class s{constructor(){this.blurAmount="1rem",this.blurOffsetLeft=0,this.blurOffsetTop=0,this.scrollOffset=0,this.isFixed=!1,this.ticking={}}updateBackground(){this.requestTick("blurContentUpdate")}componentDidLoad(){this.el.setAttribute("uuid",`${Math.random()}`),this.container=function(t,e){for(;t&&1===t.nodeType;){if(t.matches("frosted-glass-container"))return t;t=t.parentNode}return null}(this.el),this.blurContainer=this.el.querySelector(".blur-container"),this.blurContent=this.el.querySelector(".blur-content"),this.isFixed="fixed"===getComputedStyle(this.el).position,this.requestTick("blurContentUpdate"),this.initListeners()}componentDidUnload(){this.removeListeners()}onScroll(){this.scrollOffset=window.scrollY}onResize(){const t=this.blurContainer.getBoundingClientRect();this.blurOffsetLeft=t.left,this.blurOffsetTop=this.isFixed?t.top:t.top+window.scrollY}render(){return[t("div",{class:"blur-container"},t("div",{class:"blur-content",style:{filter:`blur(${this.blurAmount})`,left:`-${this.blurOffsetLeft}px`,top:`-${this.blurOffsetTop}px`,transform:`translateY(-${this.scrollOffset}px)`}}),t("div",{style:{"background-color":this.overlayColor},class:"overlay"})),t("div",{class:`glass-content${this.isFixed?" fixed":""}`},t("slot",null))]}cloneUsingDivs(t){const e=document.createElement("div");return e.innerHTML=["frosted-glass","frosted-glass-container"].reduce((t,e)=>t.split(e).join("div"),t.innerHTML),e}initListeners(){this.onResize=this.onResize.bind(this),window.addEventListener("resize",this.onResize),this.onResize(),this.isFixed&&(this.onScroll=this.onScroll.bind(this),window.addEventListener("scroll",this.onScroll),this.onScroll())}removeListeners(){window.removeEventListener("scroll",this.onScroll)}blurContentUpdate(){const t=this.cloneUsingDivs(this.container);this.removeSelected(t,[`[uuid='${this.uuid}']`,".blur-container"]),this.blurContent.innerHTML="",this.blurContent.innerHTML=t.innerHTML,this.ticking.blurContentUpdate=!1}removeSelected(t,e){e.forEach(e=>{t.querySelectorAll(e).forEach(t=>t.remove())})}requestTick(t){this.ticking[t]||requestAnimationFrame(this[t].bind(this)),this.ticking[t]=!0}static get is(){return"frosted-glass"}static get properties(){return{blurAmount:{type:String,attr:"blur-amount"},blurOffsetLeft:{state:!0},blurOffsetTop:{state:!0},el:{elementRef:!0},isFixed:{state:!0},overlayColor:{type:String,attr:"overlay-color"},scrollOffset:{state:!0},updateBackground:{method:!0},uuid:{type:String,attr:"uuid"}}}static get style(){return"frosted-glass{position:relative}.blur-container{height:100%;left:0;overflow:hidden;position:absolute;top:0;transform:translate3d(0,0,0);width:100%}.blur-container .blur-content{left:0;position:absolute;width:100vw}.blur-container .overlay{background-color:transparent;bottom:0;content:'';left:0;position:absolute;right:0;top:0}.glass-content{position:relative}.glass-content.fixed{bottom:0;left:0;position:absolute;right:0;top:0}"}}export{s as FrostedGlass};